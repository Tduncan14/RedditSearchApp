{"version":3,"sources":["redditapi.js","main.js"],"names":["search","searchTerm","searchLimit","sortBy","fetch","then","res","json","data","children","map","catch","err","console","log","searchForm","document","getElementById","searchInput","addEventListener","e","value","querySelector","showMessage","reddit","results","output","forEach","post","image","preview","images","source","url","title","truncateText","selftext","innerHTML","preventDefault","message","className","div","createElement","appendChild","createTextNode","searchContainer","insertBefore","setTimeout","remove","text","limit","shortened","indexOf","substring"],"mappings":"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","file":"main.1f19ae8e.js","sourceRoot":"..","sourcesContent":["export default{\r\n    search:function(searchTerm,searchLimit,sortBy){\r\n     return fetch(\r\n            `http://www.reddit.com/search.json?q=${searchTerm}&sort=${sortBy}&limit=${searchLimit}`\r\n          )\r\n        .then(res => res.json())\r\n        .then(data =>data.data.children.map(data =>data.data))\r\n        .catch(err => console.log(err));\r\n \r\n}\r\n}","import reddit from './redditapi';\r\n\r\n\r\nconst searchForm = document.getElementById('search-form');\r\nconst searchInput = document.getElementById('search-input');\r\n\r\n\r\n// Form event listenr\r\nsearchForm.addEventListener('submit', e =>{\r\n  //Get search Term\r\n  const searchTerm = searchInput.value;\r\n\r\n  // Get sort\r\n  const sortBy = document.querySelector('input[name=\"sortby\"]:checked').value;\r\n\r\n\r\n  const searchLimit = document.getElementById('limit').value;\r\n  console.log(searchLimit);\r\n\r\n  // Check input\r\n  if(searchTerm === ''){\r\n      // Show message\r\n      showMessage(\"please add a search term\",'alert-danger')\r\n  }\r\n    // to clear the input\r\n    searchInput.value = ''\r\n\r\n    //search\r\n    reddit.search(searchTerm.searchLimit,sortBy)\r\n    .then(results =>{\r\n        console.log(results);\r\n        \r\n        let output = '<div class=\"card-columns\">';\r\n// Check for image\r\n    \r\n        // Loop through posts\r\n        results.forEach(post =>{\r\n\r\n            let image = post.preview ? post.preview.images[0].source.url : 'https://cdn.comparitech.com/wp-content/uploads/2017/08/reddit-1.jpg';\r\n         output += `\r\n         <div class=\"card\">\r\n    <img class=\"card-img-top\" src=\"${image}\" alt=\"Card image cap\">\r\n    <div class=\"card-body\">\r\n    <h5 class=\"card-title\">${post.title}</h5>\r\n    <p class=\"card-text\">${truncateText(post.selftext,100)}</p>\r\n    <a href=\"${post.url}\" target=\"_blank\" class=\"btn btn-primary\">Read More</a>\r\n     </div>\r\n     </div>\r\n         `\r\n        })\r\n\r\n        output +='';\r\n        document.getElementById('results').innerHTML = output;\r\n    })\r\n   \r\n\r\n  \r\n    e.preventDefault();\r\n})\r\n\r\nfunction showMessage(message,className){\r\n    // create div\r\n  const div = document.createElement('div');\r\n // add Claesses\r\n  div.className = `alert ${className}`;\r\n // add text\r\n  div.appendChild(document.createTextNode(message));\r\n // get parent\r\n  const searchContainer = document.getElementById('search-container');\r\n\r\n  //Get Search\r\n  const search = document.getElementById('search');\r\n\r\n  // Insert message\r\n  searchContainer.insertBefore(div,search);\r\n  // Timeout alert\r\n  setTimeout(() =>{\r\n      document.querySelector('.alert').remove()\r\n  },3000);\r\n}\r\n\r\nfunction truncateText(text,limit){\r\n    const shortened = text.indexOf('',limit);\r\n\r\n    if(shortened == -1) return text;\r\n    return text.substring(0, shortened);\r\n}\r\n\r\n"]}